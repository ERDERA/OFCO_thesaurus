# OFCO thesaurus

## Context
As part of the [**WP16.5**](https://github.com/ERDERA/Task-16.5-coordination) project, we aim to consolidate and structure data on the functional consequences of rare diseases. The goal is to create an ontology named **OFCO** to facilitate data analysis and interoperability across different sources.

## Data Sources
1. **Orphanet Thesaurus** ([`Orphanet_Functioning_Thesaurus_EN.pdf`](data/input/Orphanet_Functioning_Thesaurus_EN.pdf)): A thesaurus of functional consequences of rare diseases based on the outdated ICF-CY version, which has been revised and expanded in ICF 2025.
2. **Functional Consequences XML File** ([`en_funct_consequences.xml`](data/input/en_funct_consequences.xml)): A structured dataset linking functional consequences to rare diseases from Orphanet. An adapted version is used: Disability_Orphanet_annotations.xml ([`Disability_Orphanet_annotations.xml`](data/input/Disability_Orphanet_annotations.xml)) which contains internal ID from Orphanet Database and seve as keys/value for OFCO_thesaurus concepts.
3. **ICF 2025**: The latest version of the International Classification of Functioning, Disability, and Health (ICF), retrieved as a structured JSON file through API calls to [ICD (ICF section).](https://icd.who.int/browse/2025-01/icf/en#619527855)
4. ORDO (Orphanet Rare Diseases Ontology), produced by Orphanet twice a year. We have used the latest version 4.7
https://sciences.orphadata.com/ordo/
5. ICF <> OFCO Thesaurus mapping in SSSOM format : [mapping_sssom.tsv](./data/input/mappings_sssom.tsv) generated by [generate_sssom.py](./scripts/generate_sssom.py)

## OFCO thesaurus processing
The previous **Orphanet Thesaurus** was manually revised by Orphanet team (Dr Ana Rath and Dr Rami Nadji) to provide a version including latest ICF alignments to ICF URI and ICF codes when relevant. (XLS file)
Based on that revision, we provided a **OFCO_Thesaurus.owl** ([`OFCO_thesaurus.owl`](OFCO_thesaurus.owl)) RDF/OWL version, including annotation metadata.

## Functional Consequences XML File
This file, available through Orphadata platform (https://sciences.orphadata.com/orphanet-scientific-knowledge-files/) contains "Diseases" annotated with "disabilities" concept, and "frequency", "temporality", "severity" and "loss of ability" concepts.
An adapted version is used: Disability_Orphanet_annotations.xml ([`Disability_Orphanet_annotations.xml`](data/input/Disability_Orphanet_annotations.xml))

## OUTPUT
- A script has been done to parse "Disability_Orphanet_annotations.xml" and "OFCO_thesaurus.owl" and produce a version of "en_funct_consequences.xml" but only with ORDO IRI for diseases concepts and OFCO IRI for disabilities concept : "Diseases_annotated_with_OFCO.owl"

([`Diseases_annotated_with_OFCO.owl`](data/output/Diseases_annotated_with_OFCO.owl)) Diseases_annotated_with_OFCO.owl : a RDF/OWL file containing "Diseases" (ORDO IRI based) annotated with OFCO thesaurus IRI.

- A script has been done to convert the OWL thesaurus OFCO_thesaurus.owl into CSV file, including ICF mappings : OFCO_thesaurus_ICF.csv

- A script has been done to check ICF URI within OFCO_thesaurus_ICF.csv and generate a report : OFCO_ICF_validation_report.txt

## Testing Method
ORDO has been used. ([`ORDO_en_4.8.owl`](https://sciences.orphadata.com/ordo/))
Import ORDO (ORDO_en_4.8.owl), Diseases_annotated_with_OFCO.owl and OFCO_Thesaurus.owl in a graphDB instance.
Testing with SPARQL queries.

## Project Organization

### Main Directories
- main : Contains OFCO_thesaurus.owl 
- **`data/input/`**: Contains source files (PDF, XLS, XML).
- **`data/output/`**: Contains outpuf files (OWL).
- **`scripts/`**: Contains ongoing work on data source parsing.
- **`sparql/`**: Contains SPARQL queries to test RDF triplestore with OFCO, ORDO and annotated diseases.

--

This project is under active development and will evolve as work progresses on data alignment and ontology structuring.

